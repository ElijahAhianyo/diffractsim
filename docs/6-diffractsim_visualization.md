# Diffractsim Visualization

[_Documentation generated by Documatic_](https://www.documatic.com)

<!---Documatic-section-Codebase Structure-start--->
## Codebase Structure

<!---Documatic-block-system_architecture-start--->
```mermaid
flowchart LR
visualization-->util
```
<!---Documatic-block-system_architecture-end--->

# #
<!---Documatic-section-Codebase Structure-end--->

<!---Documatic-section-diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_colors-start--->
## [diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_colors](6-diffractsim_visualization.md#diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_colors)

<!---Documatic-section-plot_longitudinal_profile_colors-start--->
<!---Documatic-block-diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_colors-start--->
<details>
	<summary><code>diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_colors</code> code snippet</summary>

```python
def plot_longitudinal_profile_colors(self, longitudinal_profile_rgb, extent, xlim=None, ylim=None, units=mm, z_units=cm, dark_background=True):
    from ..util.backend_functions import backend as bd
    if dark_background == True:
        plt.style.use('dark_background')
    else:
        plt.style.use('default')
    if bd != np:
        longitudinal_profile_rgb = longitudinal_profile_rgb.transpose(1, 0, 2).get()
    else:
        longitudinal_profile_rgb = longitudinal_profile_rgb.transpose(1, 0, 2)
    fig = plt.figure(figsize=(16 / 9 * 6, 6))
    ax = fig.add_subplot(1, 1, 1)
    ax.set_title('Longitudinal Profile')
    if xlim != None:
        ax.set_xlim(np.array(xlim) / z_units)
    if ylim != None:
        ax.set_ylim(np.array(ylim) / units)
    if units == mm:
        ax.set_ylabel('[mm]')
    elif units == um:
        ax.set_ylabel('[um]')
    elif units == cm:
        ax.set_ylabel('[cm]')
    elif units == nm:
        ax.set_ylabel('[nm]')
    elif units == m:
        ax.set_ylabel('[m]')
    if z_units == mm:
        ax.set_xlabel('Screen Distance [mm]')
    elif z_units == um:
        ax.set_xlabel('Screen Distance [um]')
    elif z_units == cm:
        ax.set_xlabel('Screen Distance [cm]')
    elif z_units == nm:
        ax.set_xlabel('Screen Distance [nm]')
    elif z_units == m:
        ax.set_xlabel('Screen Distance [m]')
    dz = (extent[3] - extent[2]) / longitudinal_profile_rgb.shape[1]
    im = ax.imshow(longitudinal_profile_rgb, extent=[(extent[2] - dz / 2) / z_units, (extent[3] + dz / 2) / z_units, float(extent[0] - self.dx / 2) / units, float(extent[1] + self.dx / 2) / units], interpolation='spline36', aspect='auto')
    plt.show()
```
</details>
<!---Documatic-block-diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_colors-end--->
<!---Documatic-section-plot_longitudinal_profile_colors-end--->

# #
<!---Documatic-section-diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_colors-end--->

<!---Documatic-section-diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_intensity-start--->
## [diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_intensity](6-diffractsim_visualization.md#diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_intensity)

<!---Documatic-section-plot_longitudinal_profile_intensity-start--->
<!---Documatic-block-diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_intensity-start--->
<details>
	<summary><code>diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_intensity</code> code snippet</summary>

```python
def plot_longitudinal_profile_intensity(self, longitudinal_profile_E, extent, square_root=False, grid=False, xlim=None, ylim=None, units=mm, z_units=cm, dark_background=True):
    from ..util.backend_functions import backend as bd
    if dark_background == True:
        plt.style.use('dark_background')
    else:
        plt.style.use('default')
    I = bd.real(longitudinal_profile_E * np.conjugate(longitudinal_profile_E))
    I = I.transpose(1, 0)
    if square_root == False:
        if bd != np:
            I = I.get()
        else:
            I = I
    elif bd != np:
        I = np.sqrt(I.get())
    else:
        I = np.sqrt(I)
    fig = plt.figure(figsize=(16 / 9 * 6, 6))
    ax = fig.add_subplot(1, 1, 1)
    if xlim != None:
        ax.set_xlim(np.array(xlim) / cm)
    if ylim != None:
        ax.set_ylim(np.array(ylim) / units)
    if units == mm:
        ax.set_ylabel('[mm]')
    elif units == um:
        ax.set_ylabel('[um]')
    elif units == cm:
        ax.set_ylabel('[cm]')
    elif units == nm:
        ax.set_ylabel('[nm]')
    elif units == m:
        ax.set_ylabel('[m]')
    if z_units == mm:
        ax.set_xlabel('Screen Distance [mm]')
    elif z_units == um:
        ax.set_xlabel('Screen Distance [um]')
    elif z_units == cm:
        ax.set_xlabel('Screen Distance [cm]')
    elif z_units == nm:
        ax.set_xlabel('Screen Distance [nm]')
    elif z_units == m:
        ax.set_xlabel('Screen Distance [m]')
    ax.set_title('Longitudinal Profile')
    if grid == True:
        ax.grid(alpha=0.2)
    dz = (extent[3] - extent[2]) / I.shape[1]
    im = ax.imshow(I, cmap='inferno', extent=[(extent[2] - dz / 2) / z_units, (extent[3] + dz / 2) / z_units, float(extent[0] - self.dx / 2) / units, float(extent[1] + self.dx / 2) / units], interpolation='spline36', aspect='auto')
    cb = fig.colorbar(im, orientation='vertical')
    if square_root == False:
        cb.set_label('Intensity $\\left[W / m^2 \\right]$', fontsize=13, labelpad=14)
    else:
        cb.set_label('Square Root Intensity $\\left[ \\sqrt{W / m^2 } \\right]$', fontsize=13, labelpad=14)
    plt.show()
```
</details>
<!---Documatic-block-diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_intensity-end--->
<!---Documatic-section-plot_longitudinal_profile_intensity-end--->

# #
<!---Documatic-section-diffractsim.visualization.plot_longitudinal_profile.plot_longitudinal_profile_intensity-end--->

<!---Documatic-section-diffractsim.visualization.plot_colors.plot_colors-start--->
## [diffractsim.visualization.plot_colors.plot_colors](6-diffractsim_visualization.md#diffractsim.visualization.plot_colors.plot_colors)

<!---Documatic-section-plot_colors-start--->
<!---Documatic-block-diffractsim.visualization.plot_colors.plot_colors-start--->
<details>
	<summary><code>diffractsim.visualization.plot_colors.plot_colors</code> code snippet</summary>

```python
def plot_colors(self, rgb, figsize=(6, 6), xlim=None, ylim=None, text=None, units=mm, dark_background=True):
    from ..util.backend_functions import backend as bd
    if dark_background == True:
        plt.style.use('dark_background')
    else:
        plt.style.use('default')
    if bd != np:
        rgb = rgb.get()
    fig = plt.figure(figsize=figsize)
    ax = fig.add_subplot(1, 1, 1)
    if xlim != None:
        ax.set_xlim(np.array(xlim) / units)
    if ylim != None:
        ax.set_ylim(np.array(ylim) / units)
    if units == mm:
        ax.set_xlabel('[mm]')
        ax.set_ylabel('[mm]')
    elif units == um:
        ax.set_xlabel('[um]')
        ax.set_ylabel('[um]')
    elif units == cm:
        ax.set_xlabel('[cm]')
        ax.set_ylabel('[cm]')
    elif units == nm:
        ax.set_xlabel('[nm]')
        ax.set_ylabel('[nm]')
    elif units == m:
        ax.set_xlabel('[m]')
        ax.set_ylabel('[m]')
    if text == None:
        ax.set_title('Screen distance = ' + str(self.z * 100) + ' cm')
    else:
        ax.set_title(text)
    im = ax.imshow(rgb, extent=[float(self.x[0] - self.dx / 2) / units, float(self.x[-1] + self.dx / 2) / units, float(self.y[0] - self.dy / 2) / units, float(self.y[-1] + self.dy / 2) / units], interpolation='spline36', origin='lower')
    plt.show()
```
</details>
<!---Documatic-block-diffractsim.visualization.plot_colors.plot_colors-end--->
<!---Documatic-section-plot_colors-end--->

# #
<!---Documatic-section-diffractsim.visualization.plot_colors.plot_colors-end--->

<!---Documatic-section-diffractsim.visualization.plot_intensity.plot_intensity-start--->
## [diffractsim.visualization.plot_intensity.plot_intensity](6-diffractsim_visualization.md#diffractsim.visualization.plot_intensity.plot_intensity)

<!---Documatic-section-plot_intensity-start--->
<!---Documatic-block-diffractsim.visualization.plot_intensity.plot_intensity-start--->
<details>
	<summary><code>diffractsim.visualization.plot_intensity.plot_intensity</code> code snippet</summary>

```python
def plot_intensity(self, I, square_root=False, figsize=(7, 6), xlim=None, ylim=None, grid=False, text=None, units=mm, slice_y_pos=None, slice_x_pos=None, dark_background=True):
    from ..util.backend_functions import backend as bd
    if dark_background == True:
        plt.style.use('dark_background')
    else:
        plt.style.use('default')
    if square_root == False:
        if bd != np:
            I = I.get()
        else:
            I = I
    elif bd != np:
        I = np.sqrt(I.get())
    else:
        I = np.sqrt(I)
    fig = plt.figure(figsize=figsize)
    if slice_y_pos == None and slice_x_pos == None:
        ax = fig.add_subplot(1, 1, 1)
    else:
        ax = fig.add_subplot(1, 2, 1)
    if grid == True:
        ax.grid(alpha=0.2)
    if xlim != None:
        ax.set_xlim(np.array(xlim) / units)
    if ylim != None:
        ax.set_ylim(np.array(ylim) / units)
    if units == mm:
        ax.set_xlabel('[mm]')
        ax.set_ylabel('[mm]')
    elif units == um:
        ax.set_xlabel('[um]')
        ax.set_ylabel('[um]')
    elif units == cm:
        ax.set_xlabel('[cm]')
        ax.set_ylabel('[cm]')
    elif units == nm:
        ax.set_xlabel('[nm]')
        ax.set_ylabel('[nm]')
    elif units == m:
        ax.set_xlabel('[m]')
        ax.set_ylabel('[m]')
    if text == None:
        ax.set_title('Screen distance = ' + str(self.z * 100) + ' cm')
    else:
        ax.set_title(text)
    im = ax.imshow(I, cmap='inferno', extent=[float(self.x[0] - self.dx / 2) / units, float(self.x[-1] + self.dx / 2) / units, float(self.y[0] - self.dy / 2) / units, float(self.y[-1] + self.dy / 2) / units], interpolation='spline36', origin='lower')
    cb = fig.colorbar(im, orientation='vertical')
    if square_root == False:
        cb.set_label('Intensity $\\left[W / m^2 \\right]$', fontsize=10, labelpad=10)
    else:
        cb.set_label('Square Root Intensity $\\left[ \\sqrt{W / m^2 } \\right]$', fontsize=10, labelpad=10)
    ax.set_aspect('equal')
    if slice_y_pos != None:
        ax_slice = fig.add_subplot(1, 2, 2)
        plt.subplots_adjust(wspace=0.3)
        ax_slice.set_title('X slice')
        if bd != np:
            x = self.x.get()
            y = self.y.get()
        else:
            x = self.x
            y = self.y
        ax_slice.plot(x / units, I[np.argmin(abs(y - slice_y_pos)), :] ** 2)
        ax_slice.set_ylabel('Intensity $\\left[W / m^2 \\right]$')
        if grid == True:
            ax_slice.grid(alpha=0.2)
        if xlim != None:
            ax_slice.set_xlim(np.array(xlim) / units)
        if units == mm:
            ax_slice.set_xlabel('[mm]')
        elif units == um:
            ax_slice.set_xlabel('[um]')
        elif units == cm:
            ax_slice.set_xlabel('[cm]')
        elif units == nm:
            ax_slice.set_xlabel('[nm]')
        elif units == m:
            ax_slice.set_xlabel('[m]')
    if slice_x_pos != None:
        ax_slice = fig.add_subplot(1, 2, 2)
        plt.subplots_adjust(wspace=0.3)
        ax_slice.set_title('Y slice')
        if bd != np:
            x = self.x.get()
            y = self.y.get()
        else:
            x = self.x
            y = self.y
        ax_slice.plot(y / units, I[:, np.argmin(abs(x - slice_x_pos))] ** 2)
        ax_slice.set_ylabel('Intensity $\\left[W / m^2 \\right]$')
        if grid == True:
            ax_slice.grid(alpha=0.2)
        if xlim != None:
            ax_slice.set_xlim(np.array(ylim) / units)
        if units == mm:
            ax_slice.set_xlabel('[mm]')
        elif units == um:
            ax_slice.set_xlabel('[um]')
        elif units == cm:
            ax_slice.set_xlabel('[cm]')
        elif units == nm:
            ax_slice.set_xlabel('[nm]')
        elif units == m:
            ax_slice.set_xlabel('[m]')
    plt.show()
```
</details>
<!---Documatic-block-diffractsim.visualization.plot_intensity.plot_intensity-end--->
<!---Documatic-section-plot_intensity-end--->

# #
<!---Documatic-section-diffractsim.visualization.plot_intensity.plot_intensity-end--->

<!---Documatic-section-diffractsim.visualization.plot_phase.plot_phase-start--->
## [diffractsim.visualization.plot_phase.plot_phase](6-diffractsim_visualization.md#diffractsim.visualization.plot_phase.plot_phase)

<!---Documatic-section-plot_phase-start--->
```mermaid
flowchart LR
diffractsim.visualization.plot_phase.plot_phase-->diffractsim.visualization.complex_to_rgba.complex_to_rgba
```

### Object Calls

* [diffractsim.visualization.complex_to_rgba.complex_to_rgba](6-diffractsim_visualization.md#diffractsim.visualization.complex_to_rgba.complex_to_rgba)

<!---Documatic-block-diffractsim.visualization.plot_phase.plot_phase-start--->
<details>
	<summary><code>diffractsim.visualization.plot_phase.plot_phase</code> code snippet</summary>

```python
def plot_phase(self, E, figsize=(7, 6), xlim=None, ylim=None, grid=False, text=None, max_val=0.5, units=mm, dark_background=True):
    from ..util.backend_functions import backend as bd
    if dark_background == True:
        plt.style.use('dark_background')
    else:
        plt.style.use('default')
    if bd != np:
        E = E.get()
    else:
        E = E
    E = E / np.amax(np.abs(E))
    fig = plt.figure(figsize=figsize)
    ax = fig.add_subplot(1, 1, 1)
    if grid == True:
        ax.grid(alpha=0.2)
    if xlim != None:
        ax.set_xlim(np.array(xlim) / units)
    if ylim != None:
        ax.set_ylim(np.array(ylim) / units)
    if units == mm:
        ax.set_xlabel('[mm]')
        ax.set_ylabel('[mm]')
    elif units == um:
        ax.set_xlabel('[um]')
        ax.set_ylabel('[um]')
    elif units == cm:
        ax.set_xlabel('[cm]')
        ax.set_ylabel('[cm]')
    elif units == nm:
        ax.set_xlabel('[nm]')
        ax.set_ylabel('[nm]')
    elif units == m:
        ax.set_xlabel('[m]')
        ax.set_ylabel('[m]')
    if text == None:
        ax.set_title('Screen distance = ' + str(self.z * 100) + ' cm')
    else:
        ax.set_title(text)
    plt.subplots_adjust(right=0.8)
    im = ax.imshow(complex_to_rgba(E, max_val=max_val), extent=[float(self.x[0] - self.dx / 2) / units, float(self.x[-1] + self.dx / 2) / units, float(self.y[0] - self.dy / 2) / units, float(self.y[-1] + self.dy / 2) / units], interpolation='spline36', origin='lower')
    colorbar_ax = plt.axes([0.83, 0.1, 0.018, 0.8])
    cb1 = mpl.colorbar.ColorbarBase(colorbar_ax, cmap=mpl.cm.hsv, norm=mpl.colors.Normalize(vmin=-np.pi, vmax=np.pi), orientation='vertical')
    cb1.set_label('Phase [radians]')
    plt.show()
```
</details>
<!---Documatic-block-diffractsim.visualization.plot_phase.plot_phase-end--->
<!---Documatic-section-plot_phase-end--->

# #
<!---Documatic-section-diffractsim.visualization.plot_phase.plot_phase-end--->

<!---Documatic-section-diffractsim.visualization.complex_to_rgba.complex_to_rgba-start--->
## [diffractsim.visualization.complex_to_rgba.complex_to_rgba](6-diffractsim_visualization.md#diffractsim.visualization.complex_to_rgba.complex_to_rgba)

<!---Documatic-section-complex_to_rgba-start--->
<!---Documatic-block-diffractsim.visualization.complex_to_rgba.complex_to_rgba-start--->
<details>
	<summary><code>diffractsim.visualization.complex_to_rgba.complex_to_rgba</code> code snippet</summary>

```python
def complex_to_rgba(Z: np.ndarray, max_val: float=1.0) -> np.ndarray:
    r = np.abs(Z)
    arg = np.angle(Z)
    h = (arg + np.pi) / (2 * np.pi)
    s = np.ones(h.shape)
    v = np.ones(h.shape)
    rgb = hsv_to_rgb(np.moveaxis(np.array([h, s, v]), 0, -1))
    abs_z = np.abs(Z) / max_val
    abs_z = np.where(abs_z > 1.0, 1.0, abs_z)
    return np.concatenate((rgb, abs_z.reshape((*abs_z.shape, 1))), axis=abs_z.ndim)
```
</details>
<!---Documatic-block-diffractsim.visualization.complex_to_rgba.complex_to_rgba-end--->
<!---Documatic-section-complex_to_rgba-end--->

# #
<!---Documatic-section-diffractsim.visualization.complex_to_rgba.complex_to_rgba-end--->

[_Documentation generated by Documatic_](https://www.documatic.com)